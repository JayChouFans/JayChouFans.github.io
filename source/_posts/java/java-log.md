---
title: Java 日志
date: 2020-6-8 23:10:14
author: 东京易冷
categories: Java
tags:
  - Java
---

## Java 日志

### 框架选择

使用 SLF4J 方便日后切换日志实现，实现方式使用 Logback

### 打印时机

- 进入分支结构前，通过日志确定代码走向
- 寻找 BUG 时，通过日志定位 BUG
- 抛出异常时，不应该打印日志，由最终处理方处理

### 日志格式

使用 [] 进行变量隔离，参数化信息的方式，debug 需判断是否启用，如下：

```
if (logger.isDebugEnabled()) {
    logger.debug("Processing trade with id:[{}] and symbol : [{}] ", id, symbol);
}
```

### 不同级别的使用

#### ERROR

影响程序正常运行、当前请求正常执行的异常，如果可以，记录当前堆栈信息

- 打开配置文件失败
- 第三方服务异常
- 影响功能使用的异常

#### WARN

不影响程序正常运行、当前请求正常执行但又不应该出现的异常情况

- 有容错机制时出现的异常情况
- 打开配置文件失败，启用默认配置的情况
- 接近临界值的情况，如：缓存容量即将不足
- 业务异常

#### INFO

- 系统运行情况
- 数据变更
- 复杂代码逻辑打点
- 第三方调用的入参和出参

#### DEBUG

- 便于分析代码执行的点
- 生产需关闭，设置启停开关功能，需要开启的情况，短暂开启
- 利用 debug 功能代替代码中的注释

#### TRACE

特别详细的系统运行完成信息
